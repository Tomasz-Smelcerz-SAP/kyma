# feature/sync-ory-hydra

Hydra-maester was in version: v0.0.15, we upgrade to v0.0.19

The first big difference is that hydra-maester is now not a subchart of hydra, but it's a standalone chart.
This needs testing to ensure it works correctly.

## Root directory

### File Chart.yaml

Status:
File taken from the new version

### File values.yaml:

Status:
File synchronized, some values copied from old (ours) version into new one (theirs). Some values removed.



## Directory "files"

### OAuth2Client CRD

Hydra-maester had unusable fields in the status: clientID and secret.
The status is (in both versions):
```
// OAuth2ClientStatus defines the observed state of OAuth2Client
type OAuth2ClientStatus struct {
	// ObservedGeneration represents the most recent generation observed by the daemon set controller.
	ObservedGeneration  int64               `json:"observedGeneration,omitempty"`
	ReconciliationError ReconciliationError `json:"reconciliationError,omitempty"`
}
```
From looking into controller source code, the `secretName` is actually required in previous version, but it wasn't declared as such.

**Status:**
File synchronized into cluster-essentials chart, removed from hydra-maester/files directory


### watcher.sh

https://github.com/kyma-project/kyma/pull/9010/files
Probably introduced to automatically roll-out hydra/hydra-maester on upgrades (eg.: in the case of database switch)

**Status:**
File preserved



## Directory "templates"

### CRD-related files
The following three files are for creating hydra-maester CRD during chart installation:
- crd-configmap.yaml
- crd-rbac.yaml
- crd-job.yaml

**Status:** Files removed. All CRDs in Kyma are managed by a dedicated component.

### _helper.tpl
**Status:** File synchronized. Some parts have to be copied from old version (hydra-maester.adminService).
